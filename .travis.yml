language: python
sudo: false
branches:
  only:
  - master

matrix:
  include:
    - python: 2.7
      env: id=latest TOXENV=py27-twisted-latest
    - python: 2.7
      env: id=p27-recent TOXENV=py27-twisted-16,py27-twisted-15,py27-twisted-14
    - python: 2.7
      env: id=p27-older TOXENV=py27-twisted-13,py27-twisted-12,py27-twisted-11,py27-twisted-10
    - python: 2.7
      env: id=p27-tornado TOXENV=py27-tornado
    - python: 2.6
      env: id=p26 TOXENV=py26-twisted-13,py26-twisted-12,py26-twisted-11,py26-twisted-10
    - python: "pypy-5.3.1"
      env: id=pypy-tornado TOXENV=pypy-tornado

    # todo: fix asyncore, or deprecate
    #- env: id=py27-asyncore TOXENV=py27-asyncore
    #- env: id=py26-asyncore TOXENV=py26-asyncore

cache:
  - apt

addons:
  apt:
    packages:
      - libssl-dev

install:
  - pip install tox

script:
  - tox
